<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="author" content="Manuel Freiholz">
	<meta name="keywords" content="programming c++ go golang php projects books">

	<title>Documentation v0.5 | M. Freiholz Software Development</title>

	<link href="/posts/index.xml" rel="alternate" type="application/rss+xml" title="mfreiholz.de" />
	<link href="/posts/index.xml" rel="feed" type="application/rss+xml" title="mfreiholz.de" />
</head>

<body>

	<div id="site-header" class="container">
		<div class="title">M. Freiholz</div>
		<div class="subtitle">Software Development</div>
	</div>

	<div id="site-navigation" class="container">
		<div class="row">
			<div class="col-md-8">
				<ul>
					<li><a href="/">Home</a></li>
					<li><a href="/work/">Products</a></li>
					<li><a href="/donate/">Support Me</a></li>
				</ul>
			</div>
			<div class="col-md-4">
				<div class="right">
					<div class="social">
						<a href="https://www.instagram.com/mfreiholz/" alt="Instagram" title="Me on Instagram"><img src="/images/instagram.png" height="32"></a>
						<a href="https://twitter.com/mfreiholz/" alt="Twitter" title="Me on Twitter"><img src="/images/twitter-48-black.png" height="38"></a>
					</div>
				</div>
			</div>

		</div>
		

	</div>
	

<div class="site-sub-nav container">

    <div class="row">
        <div class="col-md-12">
            <ul>
                <li><a href="/ts3video/"><img src="/images/ts3video-logo-20x20.png"><strong>TS3VIDEO:</strong></a></li>
                <li><a href="/ts3video/docs/">Documentation</a></li>
                <li><a href="/ts3video/downloads/" class="downloads-link">Downloads</a></li>
            </ul>
        </div>
    </div>
    

</div>


<div id="site-content" class="container md">

    

<h1 id="client-a-name-client-a">Client <a name="client"></a></h1>

<h2 id="what-is-it-a-name-client-what-is-it-a">What is it? <a name="client-what-is-it"></a></h2>

<p><strong>TS3VIDEO</strong> is very simple. It doesn&rsquo;t blow your mind with a full set
of new features to communicate with your friends.
<em>It just adds video</em> to the already existing audio, text-chat and
file-sharing TeamSpeak experience.</p>

<h2 id="installation-a-name-client-installation-a">Installation <a name="client-installation"></a></h2>

<p>After downloading the plugin, it can simply be installed with a double
click on the <code>*.ts3_plugin</code> file. This will start the TeamSpeak plugin
installer.</p>

<p><strong>It&rsquo;s highly recommended to close TeamSpeak before trying to install or
update the plugin.</strong></p>

<p><img src="/images/client-plugin-install.png" alt="TeamSpeak 3 plugin installer" /></p>

<h2 id="how-to-start-a-video-conference-a-name-client-start-video-a">How to start a video conference <a name="client-start-video"></a></h2>

<p>In short: Right-click any channel in TeamSpeak and choose the
<em>Video</em>-option.</p>

<blockquote>
<p>TODO: Add long description with screenshot.</p>
</blockquote>

<hr />

<h1 id="server-a-name-server-a">Server <a name="server"></a></h1>

<h2 id="installation-a-name-server-installation-a">Installation <a name="server-installation"></a></h2>

<p>The server package is usually a ZIP/TAR archive,
which can be extracted everywhere.</p>

<p><strong>Windows (ZIP archive)</strong></p>

<p>Download and extract to e.g.: <code>C:\ts3video</code></p>

<p><strong>Linux (TAR archive)</strong></p>

<pre><code class="language-bash">mkdir /opt/ts3video
cd /opt/ts3video
wget DOWNLOAD_URL_HERE
tar -xf ts3video-server.tar
</code></pre>

<h2 id="configuration-a-name-server-configuration-a">Configuration <a name="server-configuration"></a></h2>

<p>The server can be configured in multiple ways.
Currently it&rsquo;s possible to use command line parameters or a simple
configuration file.</p>

<h3 id="command-line-parameters">Command line parameters</h3>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example value</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>--config</code></td>
<td>Absolute path to configuration file.</td>
<td><code>/opt/ts3video/default.ini</code></td>
</tr>

<tr>
<td><code>--service</code></td>
<td>This parameter is required when started as a Windows Service.</td>
<td></td>
</tr>
</tbody>
</table>

<blockquote>
<p>TODO: Document all possible parameters.</p>
</blockquote>

<h3 id="config-file-recommended">Config file <em>(Recommended)</em></h3>

<p>Saving the configuration in a file might be the better way to backup
the configuration. See the comments inside the config file for further
details.</p>

<p><strong>Beta note:</strong> It&rsquo;s not possible to run more than one virtual video server.
Support for multiple virtual servers will be implemented in the next releases.</p>

<pre><code class="language-ini"># Default values for each server configuration.
#
# Special IP address values:
#   Any IPv4   = 0.0.0.0
#   Any IPv6   = ::
#   Any IPv4&amp;6 = any
#
[default]

# The IP address on which to listen for new connections.
# @version 0.1
address=any

# The port for new connections and media data (TCP &amp; UDP).
# @version 0.1
port=13370

# The IP address on which to listen for new web-socket (status) connections.
# It's recommended to allow only local access. You may allow restricted access via ProxyPass (Apache).
# @version 0.1
wsstatus-address=any

# The port for new web-socket (status) connections.
# @version 0.1
wsstatus-port=13375

# Maximum number of parallel client connections (slots).
# @version 0.1
connectionlimit=2147483647

# Maximum READ transfer rate the server is allowed to use (bytes/second).
# @version 0.1
bandwidthreadlimit=18446744073709551615

# Maximum WRITE transfer rate the server is allowed to use (bytes/second).
# @version 0.1
bandwidthwritelimit=18446744073709551615

# Comma separated list of valid channel-IDs, which are allowed to be used.
# This property maintains a list of raw channel IDs - not TS3 channel IDs.
# Leave empty to allow all.
# @todo Add &quot;macro&quot; to create raw-ids from TS3-Channel-ID.
# @version 0.1
validchannelids=

# Password to server.
# Leave empty to allow access to everyone.
# @version 0.1
password=

# Virtual server's administrator password.
# @version 0.3
adminpassword=admin

# Bridge to TeamSpeak via it's Query-Console.
#
# The bridge requires a user with the following permissions:
# - b_serverquery_login
# - b_virtualserver_select
# - b_virtualserver_client_list
# - i_channel_subscribe_power
# - i_channel_needed_subscribe_power
#
# @version 0.4
[teamspeak3-bridge]
# Enables the bridge to TeamSpeak.
# @version 0.4
enabled=0

# Address of the TeamSpeak server.
# It usually runs on the same host (127.0.0.1)
# @version 0.4
address=127.0.0.1

# The port of the TeamSpeak server query-console.
# @version 0.4
port=10011

# Login information for the query-console.
# @version 0.4
loginname=serveradmin
loginpassword=TiHxQDHt

# The connection will change the visible nickname of the query-console user.
# NOTE: Do not use yet! Leave it empty for now! Or at least not more than 10 characters!
# @version 0.4
nickname=OCS

# Port of the virtual server used for authorization.
# @version 0.4
virtualserverport=9987

# Comma separated list of server group IDs (sgid),
# which are allowed to use the video server.
# Leave empty to allow all groups.
# @version 0.4
allowedservergroups=
</code></pre>

<p>The own configuration file can be passed with the <code>--config</code> parameter.</p>

<pre><code class="language-bash">./start.sh --config &quot;/opt/ts3video/myconfig.ini&quot;
</code></pre>

<h2 id="start-the-server-a-name-server-start-a">Start the server <a name="server-start"></a></h2>

<p>It&rsquo;s not recommended to use this way in production. Production systems
should always use the Windows-Service/Linux-Daemon way.</p>

<p><strong>Windows</strong></p>

<pre><code class="language-bash">&quot;C:\ts3video\videoserver.exe&quot; --config &quot;C:\ts3video\default.ini&quot;
</code></pre>

<p><strong>Linux:</strong> On linux you need to use the <em>start.sh</em> script, which prepares the system environment.</p>

<pre><code class="language-bash">/opt/ts3video/start.sh start --config &quot;/opt/ts3video/default.ini&quot;
</code></pre>

<h2 id="run-as-windows-service-a-name-server-windows-service-a">Run as Windows Service <a name="server-windows-service"></a></h2>

<p>Installing the server process as a service can be done with the
built-in Windows tool <code>sc</code>.</p>

<p><em>All upcoming commands need to run as a privileged Administrator!</em></p>

<h3 id="install-as-service">Install as service</h3>

<pre><code class="language-bash">sc create &quot;TS3VIDEO&quot; binPath= &quot;C:\ts3video\videoserver.exe --service --config \&quot;C:\ts3video\myconfig.ini\&quot;&quot; start= auto
</code></pre>

<p>Even though it might look weird, the space after <code>binPath=</code>, <code>start=</code> and
other parameters you might append is important!</p>

<h3 id="uninstall-service">Uninstall service</h3>

<pre><code class="language-bash">sc delete &quot;TS3VIDEO&quot;
</code></pre>

<h3 id="troubleshooting">Troubleshooting</h3>

<p><strong>Problem:</strong> The service doesn&rsquo;t start or exits immediately.
- Make sure that the user who runs the service has permissions to run the process.</p>

<h2 id="run-as-linux-daemon-debian-sysv-a-name-server-linux-daemon-debian-a">Run as Linux Daemon (Debian - SysV) <a name="server-linux-daemon-debian"></a></h2>

<p>The server comes with a <code>start-initd.sh</code> script which makes it
possible to control the server process in background.</p>

<p>_<strong>Note:</strong> You have to be logged in as root._</p>

<h3 id="1-create-system-user-and-set-permissions">1. Create system user and set permissions</h3>

<pre><code class="language-bash">useradd --home-dir /opt/ts3video --system --shell /bin/sh --user-group ts3video
chown -R ts3video:ts3video /opt/ts3video
</code></pre>

<h3 id="2-prepare-the-start-up-script">2. Prepare the start-up script</h3>

<p>Open the file <code>start-initd.sh</code> for editing and update the variables on
top to fit your system.</p>

<pre><code class="language-sh">USER=&quot;ts3video&quot;
WORKDIR=&quot;/opt/ts3video&quot;
CONFIG=&quot;${WORKDIR}/default.ini&quot;
</code></pre>

<h3 id="3-install-the-script-as-start-up-script">3. Install the script as start-up script</h3>

<p>You can either copy or link the script into <code>/etc/init.d/</code>
before updating your run levels with it.</p>

<pre><code class="language-bash">cp /opt/ts3video/start-initd.sh /etc/init.d/ts3video
update-rc.d ts3video defaults
</code></pre>

<h3 id="4-test-it">4. Test it</h3>

<p>That&rsquo;s it! You can now test it with the following commands.</p>

<pre><code class="language-bash">/etc/init.d/ts3video start
/etc/init.d/ts3video stop
</code></pre>

<p>You should also reboot and test whether the VideoServer has been started
automatically.</p>

<p>The running process name may be different than expected.
You shouldn&rsquo;t see a <code>videoserver</code> process. The running process
name will be <code>ld-2.19.so</code>.</p>

<p><em>Why is that?</em> The server is shipped with its own set of common
libraries and a dynamic library loader because of portability
issues. This might change in future releases.
On some systems it&rsquo;s possible to run the <code>videoserver</code> binary directly (e.g. Ubuntu 14.04).</p>

<h2 id="server-status-web-app-a-name-server-status-class-anchor-a">Server status web-app                                                <a name="server-status" class="anchor"></a></h2>

<p>Please head to the <a href="./server-status">server status web-app documentation</a> page.</p>

<h2 id="logging-a-name-server-logging-class-anchor-a">Logging                                                              <a name="server-logging" class="anchor"></a></h2>

<p>The server is configured to log into <code>$TEMP/ts3video-server.log</code>.
Upcoming releases will allow you to configure the location and verbose
level by your self.</p>

<h2 id="kick-ban-clients-a-name-server-kick-ban-class-anchor-a">Kick / ban clients                                                   <a name="server-kick-ban" class="anchor"></a></h2>

<p><em>Since: 0.3</em></p>

<p>The server stores all bans to <code>$WORKDIR/bans.ini</code>.
If you need to unban the client&rsquo;s IP address, you must remove the IP from
this configuration file. Upcoming releases will provide a more
user-friendly way of managing those bans.</p>


</div>


<div class="container">
	<div id="site-footer">

		<div class="row">
			<div class="col-md-4">
				<ul class="links">
					<li><a href="/impressum/">Disclaimer / Impressum</a></li>
					<li>info (at) mfreiholz (dot) de</li>
				</ul>
			</div>
			<div class="col-md-4">
				Made with &#9825; mfreiholz.de
			</div>
			<div class="col-md-4">
				Support Me<br>
				<a href="/donate">Donate / Spenden</a>
			</div>
		</div>

	</div>
</div>

<link rel="stylesheet" type="text/css" href="/thirdparty/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Julius+Sans+One|Lora">
<link rel="stylesheet" type="text/css" href="/css/style.css">
<link rel="stylesheet" type="text/css" href="/css/markdown.css">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>


<script>
	(function (i, s, o, g, r, a, m) {
	i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
		(i[r].q = i[r].q || []).push(arguments)
	}, i[r].l = 1 * new Date(); a = s.createElement(o),
		m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
	})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
	ga('create', 'UA-67699481-1', 'auto');
	ga('send', 'pageview');
</script>

</body>

</html>